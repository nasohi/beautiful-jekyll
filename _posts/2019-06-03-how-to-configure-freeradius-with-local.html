---
layout: post
title: How to configure freeradius with local users
date: '2019-06-03T00:58:00.002+07:00'
author: Nasohi Ciptandani
tags:
- Freeradius
- Radius
modified_time: '2019-06-03T12:31:13.015+07:00'
thumbnail: https://1.bp.blogspot.com/-kJYKrYkFz5g/XPQJ0FdwWDI/AAAAAAAABc4/4MbRBSTYUaQ3hZdizC4AkXsScN-jcSIHACLcBGAs/s72-c/2019-06-03%2B00_38_17-Window.png
blogger_id: tag:blogger.com,1999:blog-7821506235811301823.post-2849729509862225973
blogger_orig_url: https://nciptandani.blogspot.com/2019/06/how-to-configure-freeradius-with-local.html
---

<div><div>OS: Debian9<br />Package: Freeradius 3.0<br />Hostname: srv1<br /><br />This is step by step how to configure freeradius with local users (/etc/passwd)</div><div>In this scenario, I want to create 100 users with a password and no shell login to the system capability that can be done with the following commands:<br /><br /><div class="separator" style="clear: both;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">for i in `seq 1 1 100`</span></div><div class="separator" style="clear: both;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">do</span></div><div class="separator" style="clear: both;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">useradd user$i</span></div><div class="separator" style="clear: both;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo -e "P@ssw0rd\nP@ssw0rd" | passwd user$i</span></div><div class="separator" style="clear: both;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">done</span></div></div></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><br /></span></div><div><div class="separator" style="clear: both; text-align: center;"><br /></div></div><div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-kJYKrYkFz5g/XPQJ0FdwWDI/AAAAAAAABc4/4MbRBSTYUaQ3hZdizC4AkXsScN-jcSIHACLcBGAs/s1600/2019-06-03%2B00_38_17-Window.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="36" data-original-width="471" height="30" src="https://1.bp.blogspot.com/-kJYKrYkFz5g/XPQJ0FdwWDI/AAAAAAAABc4/4MbRBSTYUaQ3hZdizC4AkXsScN-jcSIHACLcBGAs/s400/2019-06-03%2B00_38_17-Window.png" width="400" /></a></div><br />common-auth-radius&nbsp; is for radius users<br /><br />Edit like below:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-YV8QQ866yQo/XPQKDfjci7I/AAAAAAAABc8/Pil--Y_B328oSA4n2EeWO2Shb4tqRLoogCLcBGAs/s1600/2019-06-03%2B00_40_02-Window.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="224" data-original-width="499" height="178" src="https://1.bp.blogspot.com/-YV8QQ866yQo/XPQKDfjci7I/AAAAAAAABc8/Pil--Y_B328oSA4n2EeWO2Shb4tqRLoogCLcBGAs/s400/2019-06-03%2B00_40_02-Window.png" width="400" /></a></div><br />And then configure no login with PAM pam_list_file in the /etc/pam.d/common-auth to limit login to the system<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-uS-vIBZZ--k/XPQLtTguJ1I/AAAAAAAABdU/8xKRr3UeL201kBSwMMnRdJP9sw1FAcx2wCLcBGAs/s1600/2019-06-03%2B00_44_46-Window.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="478" data-original-width="734" height="260" src="https://1.bp.blogspot.com/-uS-vIBZZ--k/XPQLtTguJ1I/AAAAAAAABdU/8xKRr3UeL201kBSwMMnRdJP9sw1FAcx2wCLcBGAs/s400/2019-06-03%2B00_44_46-Window.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br />Only users in the /etc/loginusers can login to the system<br />Create a file loginusers in the /etc/<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-ekaupdcCzIQ/XPQN0QtRi7I/AAAAAAAABds/ym2BUDws8IUkynXbmOCPSditg9Y7tDXpwCLcBGAs/s1600/2019-06-03%2B00_55_37-Window.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="91" data-original-width="504" height="71" src="https://1.bp.blogspot.com/-ekaupdcCzIQ/XPQN0QtRi7I/AAAAAAAABds/ym2BUDws8IUkynXbmOCPSditg9Y7tDXpwCLcBGAs/s400/2019-06-03%2B00_55_37-Window.png" width="400" /></a></div><br /><br /></div><div><span style="text-align: justify;">Because FreeRADIUS 3 no longer accepts "Auth-Type := System". It's by default use unix pasword so we want to just configure for client use like belo</span><span style="text-align: justify;">w:</span><br /><br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-cK8vANaavm8/XPQFMTX79gI/AAAAAAAABcY/LJHc1oKke5UxUM4h37U0RRY4tCzQb4-7wCLcBGAs/s1600/2019-06-03%2B00_18_50-Window.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="406" data-original-width="610" height="265" src="https://1.bp.blogspot.com/-cK8vANaavm8/XPQFMTX79gI/AAAAAAAABcY/LJHc1oKke5UxUM4h37U0RRY4tCzQb4-7wCLcBGAs/s400/2019-06-03%2B00_18_50-Window.png" width="400" /></a></div><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/init.d/freeradius restart</span><br /><br /><span style="font-family: inherit;">Testing in srv2, we need to install freeradius-utils for testing purpose, use radtest</span><br /><span style="font-family: inherit;"><br /></span><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-HwHz0Rz_Kfc/XPQFro_TgII/AAAAAAAABcg/NHfTcs0Q77EvOaE7CAazKg1xozITdCPwACLcBGAs/s1600/2019-06-03%2B00_21_13-Window.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="160" data-original-width="626" height="101" src="https://1.bp.blogspot.com/-HwHz0Rz_Kfc/XPQFro_TgII/AAAAAAAABcg/NHfTcs0Q77EvOaE7CAazKg1xozITdCPwACLcBGAs/s400/2019-06-03%2B00_21_13-Window.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Note:</div><div class="separator" style="clear: both; text-align: left;">Debug mode</div><div class="separator" style="clear: both; text-align: left;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">/etc/init.d/freeradius stop</span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">freeradius -X</span></div><span style="font-family: inherit;"><br /></span><span style="font-family: inherit;"><br /></span><span style="font-family: inherit;"><br /></span></div>