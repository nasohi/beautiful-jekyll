---
layout: post
title: Mengganti konfigurasi NAT router linux debian dengan router cisco 1841
date: '2016-08-17T21:13:00.001+07:00'
author: Nasohi Ciptandani
tags:
- Linux
- Network
- Cisco
modified_time: '2017-08-24T10:31:35.206+07:00'
thumbnail: https://4.bp.blogspot.com/-tszsMO8vFgk/V7RxS_vIcFI/AAAAAAAAA5M/RjS6CnxoFYE6ZfI0WraPOdr6vXgzIDpUgCLcB/s72-c/nat.png
blogger_id: tag:blogger.com,1999:blog-7821506235811301823.post-5440605453300227038
blogger_orig_url: https://nciptandani.blogspot.com/2016/08/mengganti-konfigurasi-nat-router-linux.html
---

<span style="font-family: &quot;verdana&quot; , sans-serif;">Pada kasus ini ceritanya mau mengganti router linux debian dengan router cisco 1841</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Router adalah salah satu perangkat di jaringan yang digunakan untuk menghubungkan jaringan yang berbeda-beda.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Jaringan adalah sekumpulan komputer dan perangkat-perangkat jaringan yang saling terhubung, kenapa ada jaringan-jaringan yang berbeda-beda, iya karena sudah aturannya dari para pembuatnya haha, seperti yang kita tahu ada jaringan lokal, LAN, MAN, WAN, Internet dan Intranet. Ada IP Publik dan Private, Ada kelas IP, IPv4, IPv6, dll.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Di kasus ini akan menghubungkan jaringan kantor dengan jaringan ISP (internet service provider).</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Jaringan kantor itu adalah jaringan lokal atau bisa dikatakan juga LAN (Local Area Network).</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Jaringan ISP adalah jaringan yang mengatur koneksi internet, jadi para ISP misal di Indonesia ini membentuk sebuah jaringan terbentuklah jaringan internet Indonesia (IIX). http://www.iix.net.id/ .</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Mari bicara NAT (Network Address Translation). NAT adalah salah satu teknologi didalam jaringan yang digunakan untuk menerjemahkan alamat jaringan. Hehe, mudahnya NAT itu untuk menerjemahkan alamat-alamat (network,ip) didalam jaringan lokal supaya bisa terhubung ke Internet, kenapa diterjemahkan karena jaringan lokal tidak boleh langsung terhubung ke internet, sudah menjadi aturannya, haha. NAT&nbsp;</span><span style="font-family: &quot;verdana&quot; , sans-serif;">mengamankan jaringan lokal, NAT&nbsp;</span><span style="font-family: &quot;verdana&quot; , sans-serif;">juga sebagai solusi untuk menghemat IPv4, &nbsp;hehe oke asumsi sudah tahu apa itu IPv4.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Hehe kembali ke tujuan awal yaitu cara konfigurasi router 1841 sebagai NAT.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Dibawah ini adalah topologi praktek yang saya gunakan:</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Fokus diwilayah biru</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-tszsMO8vFgk/V7RxS_vIcFI/AAAAAAAAA5M/RjS6CnxoFYE6ZfI0WraPOdr6vXgzIDpUgCLcB/s1600/nat.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="220" src="https://4.bp.blogspot.com/-tszsMO8vFgk/V7RxS_vIcFI/AAAAAAAAA5M/RjS6CnxoFYE6ZfI0WraPOdr6vXgzIDpUgCLcB/s640/nat.png" width="640" /></a></div><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Langsung ke konfigurasi saja</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><b>1. Mengaktifkan IP Forward</b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Jika di linux debian konfig sysctl.conf untuk menforward packet (dari sumber ke tujuan hehe), router minimal butuh 2 interface, interface mengarah ke local network dan mengarah ke internet network. Nah agar paket dari local network bisa menuju ke internet network maka aktifkan <i>net.ipv4.ip_forward=1</i> &nbsp;di sysctl.conf</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><a href="http://irwanseptian.blogspot.co.id/2014/11/mengaktifkan-fungsi-ip-forward-linux.html">http://irwanseptian.blogspot.co.id/2014/11/mengaktifkan-fungsi-ip-forward-linux.html</a></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Nah kalau di router cisco misal seri 1841 tidak perlu konfig untuk menforward paket disini by default malah sudah aktif karena dedicated router.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><b>2. Default Route</b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Asumsi sudah memahami basic configuration seperti hostname, remote management (telnet,ssh,console), ip, gateway, default route, langsung ke konfigurasi NAT.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Oh ya sebelum konfigurasi NAT, karena tujuannya mau konek ke internet, pastikan si router sudah punya default route, default route adalah rute kemana paket akan diteruskan,dalam hal ini adalah ingin ke internet, jika terhubung ke internet default routenya biasanya adalah 0.0.0.0, kenapa 0.0.0.0 karena internet itu banyak jaringan, maka mudahnya langsung saja pakai semua network 0.0.0.0.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Kalau di linux debian saat kita konfig script &nbsp;gateway [ip_isp] &nbsp;di /etc/network/interfaces maka default route akan otomatis terbuat</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Nah di cisco perlu command <b><span style="color: blue;">#ip route 0.0.0.0 0.0.0.0 [ip_isp]</span></b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Jadi semua paket/traffic akan diteruskan ke ip_isp</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><b>3. NAT Overload</b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">NAT Overload ini menurutnya saya adalah cara express, karena didalam dunia NAT, hehe ada Static NAT, Dynamic NAT, PAT, <a href="https://agussas.wordpress.com/2015/03/30/nat-and-pat-concept-one-to-one-many-to-one-many-to-many-many-to-oneoverload">https://agussas.wordpress.com/2015/03/30/nat-and-pat-concept-one-to-one-many-to-one-many-to-many-many-to-oneoverload</a>/ , NAT-PT, NAT64, hehe, oke bahas yang gampang aja dulu.&nbsp;</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Jika di linux debian bisa memakai iptables seperti dibawah ini</span><br /><span style="color: blue; font-family: &quot;verdana&quot; , sans-serif;"><b>#iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUEARADE</b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">192.168.0.0/24 adalah network local, &nbsp;eth0 adalah yang lan card yang terhubung ke internet</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Seperti yang kita tahu IP Lokal tidak bisa terhubug ke internet, dalam bahasa indonesia Masquerade artinya menyamar, iya memang dalam konteks diatas IP/Network jaringan lokal akan di wakili oleh ip eth0 (ip yang bisa terhubung ke internet).</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Nah jika sudah dikonfig seperti diatas seharusnya IP didalam jaringan lokal sudah bisa internetan, ingat setting ip di pc dengan ip dan gateway yang benar, gateway di client adalah ip router 1841 yang mengarah ke lokal, hehe.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Nah di Cisco lumayan nih</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="color: blue;"><b>#interface fastethernet0/0</b> </span>&nbsp;(misal ke arah local network)</span><br /><span style="color: blue; font-family: &quot;verdana&quot; , sans-serif;">&nbsp; <b>ip nat inside</b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><b><span style="color: blue;">#interface fastethernet0/1</span></b> &nbsp;(ke arah internet)</span><br /><span style="color: blue; font-family: &quot;verdana&quot; , sans-serif;"><b>&nbsp; ip nat outside</b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;"><b><span style="color: blue;">#access-list 1 permit 192.168.0.0 0.0.0.255</span> </b>(asumsi sudah tau access-list, standard, extended, willcard, dll)</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">192.168.0.0 (ip local network)</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="color: blue; font-family: &quot;verdana&quot; , sans-serif;"><b>#ip nat inside source list 1 interface fastEthernet 0/1 overload</b></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">1 = nomor access-list yang tadi dibuat</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">fast0/1 = lan card yang ke internet</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span> <span style="font-family: &quot;verdana&quot; , sans-serif;">Untuk lihat traffic bisa pakai command</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">#show ip nat translations&nbsp;</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><br /><br /><div><br /></div>