---
layout: post
title: Contoh konfigurasi iptables untuk DMZ
date: '2018-09-09T13:37:00.001+07:00'
author: Nasohi Ciptandani
tags:
- IPTables
- DMZ
modified_time: '2018-09-09T13:37:24.682+07:00'
blogger_id: tag:blogger.com,1999:blog-7821506235811301823.post-7084566247346734550
blogger_orig_url: https://nciptandani.blogspot.com/2018/09/contoh-konfigurasi-iptables-untuk-dmz.html
---

<span style="font-family: inherit;">Contoh konfigurasi iptables untuk DMZ</span><br /><span style="font-family: &quot;Courier New&quot;, Courier, monospace;"><br /></span><span style="font-family: &quot;Courier New&quot;, Courier, monospace;"># set the default policy to DROP</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -P INPUT DROP</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -P OUTPUT DROP</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -P FORWARD DROP</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># to configure the system as a router, enable ip forwarding by</span><br /><span style="font-family: Courier New, Courier, monospace;">sysctl -w net.ipv4.ip_forward=1</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># allow traffic from internal (eth0) to DMZ (eth2)</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t filter -A FORWARD -i eth0 -o eth2 -m state –state NEW,ESTABLISHED,RELATED -j ACCEPT</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t filter -A FORWARD -i eth2 -o eth0 -m state –state ESTABLISHED,RELATED -j ACCEPT</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"># allow traffic from internet (eth1) to DMZ (eth2)</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t filter -A FORWARD -i eth1 -o eth2 -m state –state NEW,ESTABLISHED,RELATED -j ACCEPT</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t filter -A FORWARD -i eth2 -o eth1 -m state –state ESTABLISHED,RELATED -j ACCEPT</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;">#redirect incoming web requests at eth1 (200.0.0.1) of FIREWALL to web server at 192.168.20.2</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t nat -A PREROUTING -p tcp -i eth1 -d 200.0.0.1 –dport 80 -j DNAT –to-dest 192.168.20.2&nbsp;</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t nat -A PREROUTING -p tcp -i eth1 -d 200.0.0.1 –dport 443 -j DNAT –to-dest 192.168.20.2</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;">#redirect incoming mail (SMTP) requests at eth1 (200.0.0.1) of FIREWALL to Mail server at 192.168.20.3</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t nat -A PREROUTING -p tcp -i eth1 -d 200.0.0.1 –dport 25 -j DNAT –to-dest 192.168.20.3</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;">#redirect incoming DNS requests at eth1 (200.0.0.1) of FIREWALL to DNS server at 192.168.20.4</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t nat -A PREROUTING -p udp -i eth1 -d 200.0.0.1 –dport 53 -j DNAT –to-dest 192.168.20.4</span><br /><span style="font-family: Courier New, Courier, monospace;">iptables -t nat -A PREROUTING -p tcp -i eth1 -d 200.0.0.1 –dport 53 -j DNAT –to-dest 192.168.20.4</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: inherit;">Sumber:&nbsp;<a href="http://linuxforall.blogspot.com/">http://linuxforall.blogspot.com/</a></span>